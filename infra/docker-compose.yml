# Docker Compose for AI Engineering Monorepo
# Usage:
#   docker compose -f infra/docker-compose.yml build
#   docker compose -f infra/docker-compose.yml up

services:
  # Python base service — used by APIs, agents, and pipelines
  python:
    build:
      context: ..
      dockerfile: infra/docker/python.Dockerfile
      target: runtime
    container_name: ai-mono-python
    env_file:
      - path: ../.env
        required: false
    # Future: expose API port
    # ports:
    #   - "8000:8000"

  # Node base service — used by the Next.js frontend
  node:
    build:
      context: ..
      dockerfile: infra/docker/node.Dockerfile
      target: runtime
    container_name: ai-mono-node
    env_file:
      - path: ../.env
        required: false
    # Future: expose frontend port
    # ports:
    #   - "3000:3000"

  # Future services:
  # postgres:
  #   image: postgres:16-alpine
  #   environment:
  #     POSTGRES_DB: ai_mono
  #     POSTGRES_USER: dev
  #     POSTGRES_PASSWORD: dev
  #   ports:
  #     - "5432:5432"
  #   volumes:
  #     - pgdata:/var/lib/postgresql/data

# Future:
# volumes:
#   pgdata:
